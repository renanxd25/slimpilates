<div class="container-fluid p-3">
    <mat-icon class="float-end hover" (click)="closeModal()">close</mat-icon>

    <h1 class="titulo" *ngIf="editUser">Editar Aluno</h1>
    <h1 class="titulo" *ngIf="!editUser">Matricular Aluno</h1>
    <h2 class="subtitulo">Preencha o formulário para salvar o aluno</h2>

    <form class="row" [formGroup]="formUser">
        <div class="col-12 col-md-6 mb-2">
            <mat-form-field class="example-full-width w-100">
                <mat-label>Nome</mat-label>
                <input type="text" matInput formControlName="name" placeholder="Digite o nome">
                @if (formUser.controls['name'].invalid) {
                  <mat-error>Por favor digite um nome válido</mat-error>
                }
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
            <mat-form-field class="example-full-width w-100">
                <mat-label>E-mail</mat-label>
                <input type="email" matInput formControlName="email" placeholder="Digite o e-mail">
                @if (formUser.controls['email'].invalid) {
                  <mat-error>Por favor digite um e-mail válido</mat-error>
                }
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
            <mat-form-field class="example-full-width w-100">
                <mat-label>Telefone</mat-label>
                <input type="text" matInput formControlName="telefone" placeholder="Digite o setor" (keypress)="validateNumberInput($event)">
                @if (formUser.controls['telefone'].invalid) {
                  <mat-error>Por favor digite um telefone válido</mat-error>
                }
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>CEP</mat-label> 
              <input type="text" matInput formControlName="cep" placeholder="Digite o cep" (keypress)="validateNumberInput($event)">
              @if (formUser.controls['cep'].invalid) {
                <mat-error>Por favor digite um cep válido</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
            <mat-form-field class="example-full-width w-100">
                <mat-label>Rua</mat-label> 
                <input type="text" matInput formControlName="rua" placeholder="Digite o endereço">
                </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Bairro</mat-label> 
              <input type="text" matInput formControlName="bairro" placeholder="Digite o bairro">
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Numero</mat-label> 
              <input type="text" matInput formControlName="numero" placeholder="Digite o numero">
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Complemento</mat-label> 
              <input type="text" matInput formControlName="complemento" placeholder="Digite o complemento">
          </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Cidade</mat-label> 
              <input type="text" matInput formControlName="localidade" placeholder="Digite a cidade">
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Estado</mat-label> 
              <input type="text" matInput formControlName="estado" placeholder="Digite um estado">
              </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>RG</mat-label> 
              <input type="text" matInput formControlName="rg" placeholder="Digite o RG">
              @if (formUser.controls['rg'].invalid) {
                <mat-error>Por favor digite um RG válido</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Órgão Emissor</mat-label> 
              <input type="text" matInput formControlName="orgao_Emissor" placeholder="Digite o Órgão Emisso">
              @if (formUser.controls['orgao_Emissor'].invalid) {
                <mat-error>Por favor digite um RG válido</mat-error>
              }
          </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
            <mat-label>Estado Civil</mat-label>
              <mat-select formControlName="estado_civil">
                @for (ec of estadoCivil; track ec) {
                  <mat-option [value]="ec.descricao">{{ec.descricao}}</mat-option>
                }
              </mat-select>
          </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Naturalidade</mat-label> 
              <input type="text" matInput formControlName="naturalidade" placeholder="Digite o Naturalidade">
              @if (formUser.controls['naturalidade'].invalid) {
                <mat-error>Por favor digite um RG válido</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Nacionalidade</mat-label> 
              <input type="text" matInput formControlName="nacionalidade" placeholder="Digite a Nacionalidade">
              @if (formUser.controls['nacionalidade'].invalid) {
                <mat-error>Por favor digite uma nacionalidade válido</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Profissão</mat-label> 
              <input type="text" matInput formControlName="profissao" placeholder="Digite a profissão">
              @if (formUser.controls['profissao'].invalid) {
                <mat-error>Por favor digite uma profissao válida</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Ja fez Pilates?</mat-label> 
              <mat-select formControlName="op1">
                @for (new_jaFezPilates of jaFezPilates; track new_jaFezPilates) {
                  <mat-option [value]="new_jaFezPilates.descricao">{{new_jaFezPilates.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>De que forma nos conheceu?</mat-label> 
              <textarea matInput formControlName="op2" placeholder="De que forma nos conheceu?" rows="6"></textarea>
              @if (formUser.controls['op2'].invalid) {
                <mat-error>Por favor digite uma profissao válida</mat-error>
              }
            </mat-form-field>
        </div>
        <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="example-full-width w-100">
              <mat-label>Qual o objetivo com o Pilates?</mat-label> 
              <textarea type="text" matInput formControlName="op3" placeholder="Qual o objetivo com o Pilates?" rows="6"></textarea>
              @if (formUser.controls['op3'].invalid) {
                <mat-error>Por favor digite uma profissao válida</mat-error>
              }
            </mat-form-field>
        </div>
        <!-- BENEFICIOS - Select -->
         <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="w-100">
            <mat-label> <mat-icon>favorite</mat-icon> GymPass</mat-label>
            <mat-select formControlName="healthPlan">
              @for (plano of planosSaude; track plano) {
                <mat-option [value]="plano.descricao">{{plano.descricao}}</mat-option>
              }
            </mat-select>
          </mat-form-field>
         </div>

         <div class="col-12 col-md-6 mb-2">
          <mat-form-field class="w-100">
            <mat-label> <mat-icon>favorite</mat-icon> Tipo de Matricula</mat-label>
            <mat-select formControlName="dentalPlan">
              <mat-option *ngFor="let planoO of planosOdonto" [value]="planoO.descricao">{{planoO.descricao}}</mat-option>
            </mat-select>
          </mat-form-field>
         </div>

         <div class="col-12">
          <button class="botao-primario float-end" [disabled]="!formUser.valid" (click)="saveUser()">salvar usuário</button>
          <button class="botao-rematricula float-end" [disabled]="!formUser.valid" *ngIf="editUser" (click)="rematricula()">Rematricular aluno</button>
         </div>
    </form>


</div>